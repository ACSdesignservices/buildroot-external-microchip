From 8f0a21e83a91b73754fd92ccbf65d0c2e8292cfd Mon Sep 17 00:00:00 2001
From: Sandeep Sheriker M <sandeep.sheriker@microchip.com>
Date: Tue, 17 Sep 2019 11:01:52 -0700
Subject: [PATCH] plplot: fix configure error for generating header files

Signed-off-by: Sandeep Sheriker M <sandeep.sheriker@microchip.com>
---
 include/CMakeLists.txt      | 27 ------------------------
 lib/qsastime/CMakeLists.txt | 50 ---------------------------------------------
 src/CMakeLists.txt          |  1 -
 3 files changed, 78 deletions(-)

diff --git a/include/CMakeLists.txt b/include/CMakeLists.txt
index f8e6d30..7079673 100644
--- a/include/CMakeLists.txt
+++ b/include/CMakeLists.txt
@@ -38,33 +38,6 @@ set(plhershey-unicode-gen_SRCS
   ${CMAKE_SOURCE_DIR}/fonts/plhershey-unicode-gen.c
   )
 
-if(NOT CMAKE_CROSSCOMPILING)
-  add_executable(plhershey-unicode-gen ${plhershey-unicode-gen_SRCS})
-else(NOT CMAKE_CROSSCOMPILING)
-  SET(IMPORT_EXECUTABLES ${CMAKE_NATIVE_BINARY_DIR}/include/ImportExecutables.cmake)
-  INCLUDE(${IMPORT_EXECUTABLES})
-endif(NOT CMAKE_CROSSCOMPILING)
-
-add_custom_command(
-  OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/plhershey-unicode.h
-  COMMAND plhershey-unicode-gen
-  ${CMAKE_SOURCE_DIR}/fonts/plhershey-unicode.csv
-  ${CMAKE_CURRENT_BINARY_DIR}/plhershey-unicode.h
-  DEPENDS
-  plhershey-unicode-gen
-  ${CMAKE_SOURCE_DIR}/fonts/plhershey-unicode.csv
-  )
-
-if(NOT CMAKE_CROSSCOMPILING)
-  export(TARGETS plhershey-unicode-gen FILE ${CMAKE_CURRENT_BINARY_DIR}/ImportExecutables.cmake )
-endif(NOT CMAKE_CROSSCOMPILING)
-
-# For cross-directory dependencies....
-add_custom_target(
-  plhershey-unicode.h_built
-  DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/plhershey-unicode.h
-  )
-
 set(include_INSTALLED_HEADERS
   disptab.h
   drivers.h
diff --git a/lib/qsastime/CMakeLists.txt b/lib/qsastime/CMakeLists.txt
index 93a28c7..02fe7ff 100644
--- a/lib/qsastime/CMakeLists.txt
+++ b/lib/qsastime/CMakeLists.txt
@@ -40,57 +40,11 @@ include_directories(
 # Routine for generating a header containing data to be used by the
 # TAI-UTC transformation code.
 
-if(NOT CMAKE_CROSSCOMPILING)
-  add_executable(tai-utc-gen ${CMAKE_CURRENT_SOURCE_DIR}/tai-utc-gen.c)
-  if(MATH_LIB)
-    target_link_libraries(tai-utc-gen ${MATH_LIB})
-  endif(MATH_LIB)
-  add_executable(deltaT-gen ${CMAKE_CURRENT_SOURCE_DIR}/deltaT-gen.c ${CMAKE_CURRENT_SOURCE_DIR}/dspline.c)
-  export(TARGETS tai-utc-gen FILE ${CMAKE_CURRENT_BINARY_DIR}/tai-utc-gen.cmake )
-  export(TARGETS deltaT-gen FILE ${CMAKE_CURRENT_BINARY_DIR}/deltaT-gen.cmake )
-else(NOT CMAKE_CROSSCOMPILING)
-  # Generated by initial non-cross build above.
-  include(${CMAKE_NATIVE_BINARY_DIR}/lib/qsastime/tai-utc-gen.cmake)
-  include(${CMAKE_NATIVE_BINARY_DIR}/lib/qsastime/deltaT-gen.cmake)
-endif(NOT CMAKE_CROSSCOMPILING)
-
-add_custom_command(
-  OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/tai-utc.h
-  COMMAND tai-utc-gen
-  ${CMAKE_CURRENT_SOURCE_DIR}/tai-utc.dat
-  ${CMAKE_CURRENT_BINARY_DIR}/tai-utc.h
-  DEPENDS
-  ${CMAKE_CURRENT_SOURCE_DIR}/tai-utc.dat
-  tai-utc-gen
-  )
-
-add_custom_command(
-  OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/deltaT.h
-  COMMAND deltaT-gen
-  ${CMAKE_CURRENT_SOURCE_DIR}/deltaT.dat
-  ${CMAKE_CURRENT_BINARY_DIR}/deltaT.h
-  DEPENDS
-  ${CMAKE_CURRENT_SOURCE_DIR}/deltaT.dat
-  deltaT-gen
-  )
-
-# These target-level dependencies needed below.
-add_custom_target(
-  tai-utc.h_built
-  DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/tai-utc.h
-  )
-
-add_custom_target(
-  deltaT.h_built
-  DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/deltaT.h
-  )
-
 set(qsastime_LIB_SRCS
   qsastime.c dsplint.c
   )
 
 add_library(qsastime ${qsastime_LIB_SRCS})
-add_dependencies(qsastime tai-utc.h_built deltaT.h_built)
 
 if(MATH_LIB)
   if(NON_TRANSITIVE)
@@ -136,14 +90,12 @@ if(TEST_QSASTIME)
   # to make the private library API visible.
 
   add_executable(qsastime_test qsastime_test.c qsastime_extra.c qsastime.c)
-  add_dependencies(qsastime_test tai-utc.h_built)
   if(MATH_LIB)
     target_link_libraries(qsastime_test ${MATH_LIB})
   endif(MATH_LIB)
 
   # Routine for testing bhunt_search function in qsastime.c.
   add_executable(bhunt_search_test bhunt_search_test.c qsastime.c)
-  add_dependencies(bhunt_search_test tai-utc.h_built)
   if(MATH_LIB)
     target_link_libraries(bhunt_search_test ${MATH_LIB})
   endif(MATH_LIB)
@@ -153,7 +105,6 @@ if(TEST_QSASTIME)
   # Add in dsplint.c rather than use the library because don't want
   # to make the private library API visible.
   add_executable(deltaT_test deltaT_test.c dsplint.c)
-  add_dependencies(deltaT_test deltaT.h_built)
 
   # Routine for testing just the library functions against their library
   # inverses (to test self-consistency when such inverses exist) and also
@@ -169,7 +120,6 @@ if(TEST_QSASTIME)
 
   if(BUILD_QSASTIME_TESTLIB)
     add_executable(qsastime_testlib qsastime_testlib.c qsastime.c)
-    add_dependencies(qsastime_testlib tai-utc.h_built)
     if(MATH_LIB)
       target_link_libraries(qsastime_testlib ${MATH_LIB})
     endif(MATH_LIB)
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index d81b6a7..cbf1033 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -179,7 +179,6 @@ include_directories(
   ${CMAKE_BINARY_DIR}/include
   )
 add_library(plplot ${plplot_LIB_SRCS})
-add_dependencies(plplot plhershey-unicode.h_built)
 
 # Deal with external libraries.
 set(LIB_INSTALL_RPATH ${LIB_DIR})
-- 
2.7.4

